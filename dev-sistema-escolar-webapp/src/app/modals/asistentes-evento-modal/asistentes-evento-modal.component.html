<h2 mat-dialog-title>Asistentes - {{ data.evento.titulo }}</h2>

<div mat-dialog-content class="asistentes-modal-content">
  <div *ngIf="isLoading" class="asistentes-loading">
    Cargando asistentes...
  </div>

  <div *ngIf="!isLoading && error" class="asistentes-error">
    {{ error }}
  </div>

  <div *ngIf="!isLoading && registros.length === 0 && !error" class="asistentes-empty">
    No hay asistentes registrados en este evento.
  </div>

  <table mat-table [dataSource]="registros" *ngIf="!isLoading && registros.length > 0">
    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef>Nombre</th>
      <td mat-cell *matCellDef="let registro">
        {{ registro.user?.first_name }} {{ registro.user?.last_name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="rol">
      <th mat-header-cell *matHeaderCellDef>Rol</th>
      <td mat-cell *matCellDef="let registro">{{ registro.rol || 'N/A' }}</td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Correo</th>
      <td mat-cell *matCellDef="let registro">{{ registro.user?.email }}</td>
    </ng-container>

    <ng-container matColumnDef="confirmado">
      <th mat-header-cell *matHeaderCellDef>Confirmado</th>
      <td mat-cell *matCellDef="let registro">
        <mat-checkbox
          [checked]="registro.confirmado"
          (change)="toggleConfirmacion(registro, $event.checked)">
        </mat-checkbox>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>

<div mat-dialog-actions align="end">
  <button mat-stroked-button color="primary" (click)="cerrar()">Cerrar</button>
</div>
